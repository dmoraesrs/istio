# Configuração do Prometheus
prometheus:
  enabled: true
  service:
    type: ClusterIP
    port: 9090
  ingress:
    enabled: true
    hosts:
      - istio-prometheus.plataformammais-sandbox.n-mercantil.com.br
    gateway: istio-system/istio-ingressgateway
  server:
    global:
      scrape_interval: 15s
    persistentVolume:
      enabled: true
      size: 50Gi
  nodeSelector:
    layer: apps  # Afinidade para o NodePool com a label "layer=apps"

# Configuração do Grafana
grafana:
  enabled: true
  service:
    type: ClusterIP
    port: 3000
  ingress:
    enabled: true
    hosts:
      - istio-grafana.plataformammais-sandbox.n-mercantil.com.br
    gateway: istio-system/istio-ingressgateway
  adminPassword: admin  # Alterar senha para produção
  datasources:
    datasources.yaml:
      apiVersion: 1
      datasources:
        - name: Prometheus
          type: prometheus
          url: http://prometheus:9090
          access: proxy
          isDefault: true
        - name: Loki
          type: loki
          url: http://loki:3100
          access: proxy
          isDefault: false
  nodeSelector:
    layer: apps  # Afinidade para o NodePool com a label "layer=apps"

# Configuração do Loki
loki:
  enabled: true
  persistence:
    enabled: true
    size: 10Gi
  service:
    type: ClusterIP
    port: 3100
  ingress:
    enabled: true
    hosts:
      - istio-loki.plataformammais-sandbox.n-mercantil.com.br
    gateway: istio-system/istio-ingressgateway
  nodeSelector:
    layer: apps  # Afinidade para o NodePool com a label "layer=apps"

# Configuração do Alertmanager
alertmanager:
  enabled: true
  service:
    type: ClusterIP
    port: 9093
  ingress:
    enabled: true
    hosts:
      - istio-alertmanager.plataformammais-sandbox.n-mercantil.com.br
    gateway: istio-system/istio-ingressgateway
  nodeSelector:
    layer: apps  # Afinidade para o NodePool com a label "layer=apps"

# Configuração do Istio Gateway e Serviços
istio:
  enabled: true
  gateways:
    istio-ingressgateway:
      enabled: true
